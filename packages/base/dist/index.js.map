{"version":3,"file":"index.js","sources":["../src/types/types.ts","../src/core/command-generator.ts","../src/core/event-manager.ts","../src/core/command-history.ts","../src/core/execution-pipeline.ts","../src/canvas/pixel-canvas.ts","../src/core/layer-manager.ts","../src/canvas/guide-canvas.ts","../src/canvas/preview-canvas.ts","../../../node_modules/style-inject/dist/style-inject.es.js","../src/core/pixel-dust-engine.ts","../src/core/pixel-dust-api.ts"],"sourcesContent":["/** Pixel Canvas types */\n\nexport enum CanvasType {\n  X50 = 50,\n  X100 = 100,\n  X200 = 200,\n  X500 = 500\n}\n\n/** Layer Manager types */\n\nexport type LayerMetaData = {\n  uuid: string;\n  imagePreview?: string;\n  hidden: boolean;\n};\n\nexport enum LayerCommandType {\n  ADD_AFTER = 'ADD_AFTER',\n  ADD_BEFORE = 'ADD_BEFORE',\n  DELETE = 'DELETE',\n  REARRANGE = 'REARRANGE',\n  HIDE = 'HIDE',\n  SHOW = 'SHOW',\n  INSERT_BEFORE = 'INSERT_BEFORE',\n  INSERT_AFTER = 'INSERT_AFTER'\n}\n\nexport type AddLayerAfter = {\n  type: LayerCommandType.ADD_AFTER;\n  uuid?: string;\n};\n\nexport type AddLayerBefore = {\n  type: LayerCommandType.ADD_BEFORE;\n  uuid: string;\n};\n\nexport type DeleteLayer = {\n  type: LayerCommandType.DELETE;\n  uuid: string;\n};\n\nexport type HideLayer = {\n  type: LayerCommandType.HIDE;\n  uuid: string;\n};\n\nexport type ShowLayer = {\n  type: LayerCommandType.SHOW;\n  uuid: string;\n};\n\nexport type InsertLayerBefore = {\n  type: LayerCommandType.INSERT_BEFORE;\n  uuid: string;\n  destinationUuid: string;\n};\n\nexport type InsertLayerAfter = {\n  type: LayerCommandType.INSERT_AFTER;\n  uuid: string;\n  destinationUuid: string;\n};\n\nexport type LayerCommands =\n  | AddLayerAfter\n  | AddLayerBefore\n  | DeleteLayer\n  | HideLayer\n  | ShowLayer\n  | InsertLayerBefore\n  | InsertLayerAfter;\n\nexport type ExtendedAddLayerAfter = AddLayerAfter & {\n  generatedUuid: string;\n};\n\nexport type ExtendedAddLayerBefore = AddLayerBefore & {\n  generatedUuid: string;\n};\n\nexport type HistoryLayerCommands =\n  | ExtendedAddLayerAfter\n  | ExtendedAddLayerBefore\n  | DeleteLayer\n  | HideLayer\n  | ShowLayer\n  | InsertLayerBefore\n  | InsertLayerAfter;\n\n/** Command Generator types */\n\nexport enum InstrumentType {\n  PEN = 'PEN',\n  FILL = 'FILL',\n  ERASER = 'ERASER',\n  PIXEL_SQUARE = 'PIXEL_SQUARE',\n  PIXEL_CIRCLE = 'PIXEL_CIRCLE',\n  COLOR_PICKER = 'COLOR_PICKER'\n}\n\ntype BaseCommand = {\n  x: number;\n  y: number;\n};\n\nexport type PenCommand = BaseCommand & {\n  instrument: InstrumentType.PEN;\n  color: string;\n  size?: number;\n};\n\nexport type PixelSquareCommand = BaseCommand & {\n  instrument: InstrumentType.PIXEL_SQUARE;\n  color: string;\n  size?: number;\n};\n\nexport type EraserCommand = BaseCommand & {\n  instrument: InstrumentType.ERASER;\n  size?: number;\n};\n\nexport type CanvasCommands = PenCommand | EraserCommand | PixelSquareCommand;\n\n/** Command History types */\n\nexport type HistoryCanvasCommands = {\n  instrument: InstrumentType.PEN | InstrumentType.ERASER | InstrumentType.PIXEL_SQUARE;\n  color: string | undefined;\n  activeLayerUuid: string;\n  cartesianArray: { x: number; y: number }[];\n};\n","import { Observable, Subject } from 'rxjs';\nimport { map, distinctUntilChanged } from 'rxjs/operators';\nimport {\n  CanvasType,\n  PenCommand,\n  PixelSquareCommand,\n  EraserCommand,\n  InstrumentType,\n  CanvasCommands,\n  LayerCommands\n} from '../types/types';\n\ntype CommandGeneratorProps = {\n  drawStream: Observable<{\n    x: number;\n    y: number;\n  }>;\n  previewStream: Observable<{ x: number; y: number }>;\n  dimension: number;\n  canvasType: CanvasType;\n};\nclass CommandGenerator {\n  canvasCommand$: Observable<CanvasCommands>;\n\n  previewCanvasCommand$: Observable<CanvasCommands>;\n\n  layerCommand$ = new Subject<LayerCommands>();\n\n  drawingState = {\n    foregroundColor: 'rgb(0, 0, 0, 1)',\n    backgroundColor: 'rgb(255, 255, 255, 1)',\n    instrument: InstrumentType.PEN\n  };\n\n  constructor(options: CommandGeneratorProps) {\n    this.canvasCommand$ = options.drawStream.pipe(\n      map(({ x, y }) => ({ u: x / options.dimension, v: y / options.dimension })),\n      map(({ u, v }) => ({\n        x: Math.floor(u * options.canvasType),\n        y: Math.floor(v * options.canvasType)\n      })),\n      map(({ x, y }) => {\n        switch (this.drawingState.instrument) {\n          case InstrumentType.PEN:\n            return {\n              x,\n              y,\n              color: this.drawingState.foregroundColor,\n              instrument: InstrumentType.PEN\n            } as PenCommand;\n          case InstrumentType.PIXEL_SQUARE:\n            return {\n              x,\n              y,\n              color: this.drawingState.foregroundColor,\n              instrument: InstrumentType.PIXEL_SQUARE\n            } as PixelSquareCommand;\n          case InstrumentType.ERASER:\n            return {\n              x,\n              y,\n              instrument: InstrumentType.ERASER\n            } as EraserCommand;\n          default:\n            throw new Error('Draw command not supported');\n        }\n      }),\n      distinctUntilChanged((prev, curr) => {\n        if (prev && curr) {\n          if (prev.x !== curr.x || prev.y !== curr.y || prev.instrument !== curr.instrument) {\n            return false;\n          }\n          if ((prev as PenCommand).color && (curr as PenCommand).color) {\n            if ((prev as PenCommand).color !== (curr as PenCommand).color) {\n              return false;\n            }\n            return true;\n          }\n        }\n        return true;\n      })\n    );\n\n    this.previewCanvasCommand$ = options.previewStream.pipe(\n      map(({ x, y }) => ({ u: x / options.dimension, v: y / options.dimension })),\n      map(({ u, v }) => ({\n        x: Math.floor(u * options.canvasType),\n        y: Math.floor(v * options.canvasType)\n      })),\n      map(({ x, y }) => {\n        switch (this.drawingState.instrument) {\n          case InstrumentType.PEN:\n            return {\n              x,\n              y,\n              color: this.drawingState.foregroundColor,\n              instrument: InstrumentType.PEN\n            } as PenCommand;\n          case InstrumentType.PIXEL_SQUARE:\n            return {\n              x,\n              y,\n              color: this.drawingState.foregroundColor,\n              instrument: InstrumentType.PIXEL_SQUARE\n            } as PixelSquareCommand;\n          case InstrumentType.ERASER:\n            return {\n              x,\n              y,\n              instrument: InstrumentType.ERASER\n            } as EraserCommand;\n          default:\n            throw new Error('Preview command not supported');\n        }\n      }),\n      distinctUntilChanged((prev, curr) => {\n        if (prev && curr) {\n          if (prev.x !== curr.x || prev.y !== curr.y || prev.instrument !== curr.instrument) {\n            return false;\n          }\n          if ((prev as PenCommand).color && (curr as PenCommand).color) {\n            if ((prev as PenCommand).color !== (curr as PenCommand).color) {\n              return false;\n            }\n            return true;\n          }\n        }\n        return true;\n      })\n    );\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  cleanUp(): void {\n    console.info('clean up for command generator called');\n  }\n}\n\nexport default CommandGenerator;\n","import { fromEvent, Observable, concat } from 'rxjs';\nimport {\n  switchMap,\n  filter,\n  takeUntil,\n  tap,\n  map,\n  first,\n  takeWhile,\n  finalize,\n  mapTo\n} from 'rxjs/operators';\n\ntype EventManagerProps = {\n  canvasContainerElement: HTMLDivElement;\n  stage: HTMLDivElement;\n};\n\nclass EventManager {\n  targetElement: HTMLDivElement;\n\n  containerElement: HTMLDivElement;\n\n  canvasMoveCache = {\n    prevX: 0,\n    prevY: 0,\n    initX: 0,\n    initY: 0,\n    isMoving: false\n  };\n\n  canvasScaleCache = {\n    scale: 1\n  };\n\n  canvasMove$: Observable<{\n    x: number;\n    y: number;\n  }>;\n\n  canvasDraw$: Observable<{\n    x: number;\n    y: number;\n  }>;\n\n  canvasPreview$: Observable<{\n    x: number;\n    y: number;\n  }>;\n\n  canvasScale$: Observable<{\n    scale: number;\n  }>;\n\n  undoStream$: Observable<void>;\n\n  constructor(options: EventManagerProps) {\n    this.targetElement = options.canvasContainerElement;\n    this.containerElement = options.stage;\n\n    const mouseDown$ = fromEvent<MouseEvent>(this.targetElement, 'mousedown');\n    const mouseMove$ = fromEvent<MouseEvent>(this.targetElement, 'mousemove');\n    const mouseUp$ = fromEvent<MouseEvent>(window, 'mouseup');\n    const mouseLeave$ = fromEvent<MouseEvent>(this.targetElement, 'mouseleave');\n\n    const wheel$ = fromEvent<WheelEvent>(this.containerElement, 'wheel').pipe(\n      tap((event: WheelEvent) => {\n        event.preventDefault();\n      })\n    );\n\n    const spaceKeyDown$ = fromEvent<KeyboardEvent>(window, 'keydown').pipe(\n      filter((event: KeyboardEvent) => event.code === 'Space')\n    );\n    const spaceKeyUp$ = fromEvent<KeyboardEvent>(window, 'keyup').pipe(\n      filter((event: KeyboardEvent) => event.code === 'Space')\n    );\n\n    const ctrlKeyDown$ = fromEvent<KeyboardEvent>(window, 'keydown').pipe(\n      filter((event: KeyboardEvent) => event.code === 'ControlLeft')\n    );\n    const ctrlKeyUp$ = fromEvent<KeyboardEvent>(window, 'keyup').pipe(\n      filter((event: KeyboardEvent) => event.code === 'ControlLeft')\n    );\n\n    const zKeyDown$ = fromEvent<KeyboardEvent>(window, 'keydown').pipe(\n      filter((event: KeyboardEvent) => event.code === 'KeyZ')\n    );\n\n    this.canvasMove$ = spaceKeyDown$.pipe(\n      first(),\n      tap(() => {\n        this.canvasMoveCache.isMoving = true;\n        options.canvasContainerElement.style.setProperty('cursor', 'grab');\n      }),\n      switchMap(() => {\n        return concat(\n          mouseDown$.pipe(\n            first(),\n            tap((event: MouseEvent) => {\n              const { x, y } = event;\n              this.canvasMoveCache.prevX = x;\n              this.canvasMoveCache.prevY = y;\n            })\n          ),\n          mouseMove$\n        );\n      }),\n      map((event: MouseEvent) => {\n        const { x, y } = event;\n        const { prevX, prevY, initX, initY } = this.canvasMoveCache;\n        const nextX = x - prevX + initX;\n        const nextY = y - prevY + initY;\n\n        this.canvasMoveCache.prevX = x;\n        this.canvasMoveCache.prevY = y;\n        this.canvasMoveCache.initX = nextX;\n        this.canvasMoveCache.initY = nextY;\n\n        return {\n          x: nextX,\n          y: nextY\n        };\n      }),\n      takeUntil(spaceKeyUp$),\n      takeUntil(mouseUp$),\n      finalize(() => {\n        this.canvasMoveCache.isMoving = false;\n        options.canvasContainerElement.style.setProperty('cursor', 'unset');\n      })\n    );\n\n    this.canvasScale$ = wheel$.pipe(\n      filter((event: WheelEvent) => event.ctrlKey),\n      map((event) => {\n        const prevScale = this.canvasScaleCache.scale;\n\n        if (event.deltaY < 0) {\n          if (prevScale >= 2) {\n            return this.canvasScaleCache;\n          }\n\n          this.canvasScaleCache = {\n            scale: prevScale + 0.1\n          };\n\n          return this.canvasScaleCache;\n        }\n\n        if (prevScale <= 0.7) {\n          return this.canvasScaleCache;\n        }\n\n        this.canvasScaleCache = {\n          scale: prevScale - 0.1\n        };\n\n        return this.canvasScaleCache;\n      })\n    );\n\n    this.canvasDraw$ = concat(mouseDown$.pipe(first()), mouseMove$).pipe(\n      takeWhile(() => !this.canvasMoveCache.isMoving),\n      takeUntil(mouseUp$),\n      map((event: MouseEvent) => ({ x: event.offsetX, y: event.offsetY }))\n    );\n\n    this.canvasPreview$ = mouseMove$.pipe(\n      takeUntil(mouseLeave$),\n      map((event: MouseEvent) => {\n        return { x: event.offsetX, y: event.offsetY };\n      })\n    );\n\n    this.undoStream$ = ctrlKeyDown$.pipe(\n      switchMap(() => zKeyDown$),\n      mapTo(undefined),\n      takeUntil(ctrlKeyUp$)\n    );\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  cleanUp(): void {\n    console.info('clean up for event manager called');\n  }\n}\n\nexport default EventManager;\n","import { Observable, merge, Subscription } from 'rxjs';\nimport { HistoryCanvasCommands, HistoryLayerCommands } from '../types/types';\n\ntype CommandHistoryProps = {\n  drawCommand$: Observable<HistoryCanvasCommands>;\n  layerCommand$: Observable<HistoryLayerCommands>;\n};\n\ntype Command = HistoryCanvasCommands | HistoryLayerCommands;\n\nclass CommandHistory {\n  redoStack: Command[] = [];\n\n  subscriptions: Subscription[] = [];\n\n  constructor({ drawCommand$, layerCommand$ }: CommandHistoryProps) {\n    this.subscriptions.push(\n      merge(drawCommand$, layerCommand$).subscribe({\n        next: (command) => {\n          console.log(command);\n          this.redoStack.push(command);\n        }\n      })\n    );\n  }\n\n  cleanUp(): void {\n    this.subscriptions.forEach((subscription) => {\n      subscription.unsubscribe();\n    });\n  }\n}\n\nexport default CommandHistory;\n","import { Subscription } from 'rxjs';\nimport {\n  map,\n  filter,\n  tap,\n  finalize,\n  repeat,\n  share,\n  reduce,\n  groupBy,\n  switchMap\n} from 'rxjs/operators';\nimport CommandGenerator from './command-generator';\nimport LayerManager from './layer-manager';\nimport { HistoryCanvasCommands, InstrumentType } from '../types/types';\nimport CommandHistory from './command-history';\nimport PreviewCanvas from '../canvas/preview-canvas';\n\ntype ExecutionPipelineProps = {\n  layerManager: LayerManager;\n  commandGenerator: CommandGenerator;\n  previewCanvas: PreviewCanvas;\n};\n\nclass ExecutionPipeline {\n  layerManager: LayerManager;\n\n  previewCanvas: PreviewCanvas;\n\n  commandGenerator: CommandGenerator;\n\n  commandHistory: CommandHistory;\n\n  subscriptions: Subscription[] = [];\n\n  constructor(options: ExecutionPipelineProps) {\n    this.layerManager = options.layerManager;\n    this.commandGenerator = options.commandGenerator;\n    this.previewCanvas = options.previewCanvas;\n\n    this.subscriptions.push(\n      this.commandGenerator.previewCanvasCommand$\n        .pipe(\n          finalize(() => {\n            this.previewCanvas.refresh();\n          }),\n          repeat()\n        )\n        .subscribe({\n          next: (command) => {\n            this.previewCanvas.preview(command);\n          }\n        })\n    );\n\n    const drawCommand$ = this.commandGenerator.canvasCommand$.pipe(\n      filter(() => !!this.layerManager.activeLayer),\n      map((command) => {\n        if (!this.layerManager.activeLayer?.uuid) {\n          throw new Error('Active layer needed to store history');\n        }\n\n        return {\n          ...command,\n          activeLayerUuid: this.layerManager.activeLayer?.uuid\n        };\n      }),\n      tap((command) => {\n        this.layerManager.activeLayer?.pixelCanvas.execute(command);\n      }),\n      groupBy((command) => command.instrument),\n      switchMap((command$) =>\n        command$.pipe(\n          reduce(\n            (acc: HistoryCanvasCommands, command) => {\n              if (command.instrument === InstrumentType.PEN) {\n                acc.color = command.color;\n              }\n\n              acc.instrument = command.instrument;\n              acc.activeLayerUuid = command.activeLayerUuid;\n              acc.cartesianArray.push({ x: command.x, y: command.y });\n              return acc;\n            },\n            {\n              instrument: InstrumentType.PEN,\n              color: undefined,\n              activeLayerUuid: '',\n              cartesianArray: []\n            }\n          )\n        )\n      ),\n      repeat(),\n      share()\n    );\n\n    const layerCommand$ = this.commandGenerator.layerCommand$.pipe(\n      map((command) => this.layerManager.execute(command))\n    );\n\n    this.commandHistory = new CommandHistory({\n      drawCommand$,\n      layerCommand$\n    });\n\n    this.subscriptions.push(\n      drawCommand$.subscribe({\n        next: (command) => {\n          this.layerManager.updateLayerPreview(command.activeLayerUuid);\n        }\n      })\n    );\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  undo(count = 1): void {\n    // find out type of command\n    const numberOfCommands = this.commandHistory.redoStack.length;\n    if (numberOfCommands >= 1) {\n      const lastCommand = this.commandHistory.redoStack[numberOfCommands - 1];\n      console.log(lastCommand);\n    } else {\n      throw Error('Undo cannot be performed');\n    }\n  }\n\n  cleanUp(): void {\n    this.commandHistory.cleanUp();\n\n    this.subscriptions.forEach((subscription) => {\n      subscription.unsubscribe();\n    });\n  }\n}\n\nexport default ExecutionPipeline;\n","import { CanvasCommands, CanvasType, InstrumentType } from '../types/types';\n\nclass PixelCanvas {\n  canvas: HTMLCanvasElement;\n\n  ctx: CanvasRenderingContext2D;\n\n  dimension: number;\n\n  tileDimension: number;\n\n  canvasType: CanvasType;\n\n  constructor(canvasType: CanvasType, dimension: number, uuid: string) {\n    this.dimension = dimension;\n    this.canvasType = canvasType;\n    this.tileDimension = dimension / canvasType;\n    this.canvas = document.createElement('canvas');\n    this.canvas.classList.add('pixel-canvas');\n    this.canvas.height = dimension;\n    this.canvas.width = dimension;\n    this.canvas.setAttribute('id', uuid);\n\n    const ctx = this.canvas.getContext('2d');\n    if (ctx) {\n      this.ctx = ctx;\n    } else {\n      throw Error('Context is null');\n    }\n  }\n\n  execute(command: CanvasCommands): void {\n    switch (command.instrument) {\n      case InstrumentType.PEN:\n        this.ctx.fillStyle = command.color;\n        this.ctx.fillRect(\n          Math.round(command.x * this.tileDimension),\n          Math.round(command.y * this.tileDimension),\n          this.tileDimension,\n          this.tileDimension\n        );\n        break;\n      case InstrumentType.PIXEL_SQUARE:\n        this.ctx.fillStyle = command.color;\n        this.ctx.fillRect(\n          Math.round(command.x * this.tileDimension - 16),\n          Math.round(command.y * this.tileDimension - 16),\n          this.tileDimension * 5,\n          this.tileDimension * 5\n        );\n        break;\n      case InstrumentType.ERASER:\n        this.ctx.clearRect(\n          Math.round(command.x * this.tileDimension),\n          Math.round(command.y * this.tileDimension),\n          this.tileDimension,\n          this.tileDimension\n        );\n        break;\n      default:\n        break;\n    }\n  }\n\n  getCanvasBlob(type?: string, quality?: number): Promise<Blob | null> {\n    return new Promise((resolve) => {\n      this.canvas.toBlob(\n        (blob) => {\n          resolve(blob);\n        },\n        type ?? 'img/png',\n        quality\n      );\n    });\n  }\n}\n\nexport default PixelCanvas;\n","import { v4 as uuidv4 } from 'uuid';\nimport PixelCanvas from '../canvas/pixel-canvas';\nimport {\n  LayerMetaData,\n  CanvasType,\n  LayerCommands,\n  LayerCommandType,\n  HistoryLayerCommands\n} from '../types/types';\n\nexport type Layer = {\n  pixelCanvas: PixelCanvas;\n  uuid: string;\n  imagePreview?: string;\n  hidden: boolean;\n};\n\ntype LayerManagerProps = {\n  canvasContainerElement: HTMLDivElement;\n  dimension: number;\n  canvasType: CanvasType;\n};\n\nclass LayerManager {\n  layerStack: Layer[];\n\n  dimension: number;\n\n  canvasType: CanvasType;\n\n  canvasLayerWrapperElement: HTMLDivElement;\n\n  activeLayer: Layer | null = null;\n\n  layerStackUpdateCB: undefined | ((arg: LayerMetaData[]) => void) = undefined;\n\n  activeLayerUpdateCB: undefined | ((arg: LayerMetaData | null) => void) = undefined;\n\n  constructor(options: LayerManagerProps) {\n    this.layerStack = [];\n    this.dimension = options.dimension;\n    this.canvasType = options.canvasType;\n\n    this.canvasLayerWrapperElement = document.createElement('div');\n    this.canvasLayerWrapperElement.classList.add('canvas-layer-wrapper');\n\n    options.canvasContainerElement.appendChild(this.canvasLayerWrapperElement);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  cleanUp(): void {\n    console.info('clean up for layer manager called');\n  }\n\n  setActiveLayer(arg: { uuid: string } | null): void {\n    if (arg) {\n      const filterOutput = this.layerStack.filter((layer) => layer.uuid === arg.uuid);\n\n      if (filterOutput.length > 1) {\n        throw Error('uuid matches more than one layer');\n      } else if (filterOutput.length < 1) {\n        throw Error('uuid does not match any layer');\n      } else {\n        const [layer] = filterOutput;\n        this.activeLayer = layer;\n      }\n    } else {\n      this.activeLayer = null;\n    }\n\n    if (this.activeLayerUpdateCB) this.activeLayerUpdateCB(this.activeLayer);\n  }\n\n  getActiveLayer(): Layer | null {\n    return this.activeLayer;\n  }\n\n  getActiveLayerUUID(): string | null {\n    return this.activeLayer?.uuid ?? null;\n  }\n\n  addLayerAfter(arg?: { uuid?: string }): Layer {\n    if (!arg?.uuid) {\n      const uuid = uuidv4();\n      const layer = {\n        pixelCanvas: new PixelCanvas(this.canvasType, this.dimension, uuid),\n        uuid,\n        hidden: false\n      };\n      this.canvasLayerWrapperElement.appendChild(layer.pixelCanvas.canvas);\n      this.layerStack.push(layer);\n\n      if (this.layerStackUpdateCB)\n        this.layerStackUpdateCB(\n          this.layerStack.map((_layer) => ({\n            uuid: _layer.uuid,\n            imagePreview: _layer.imagePreview,\n            hidden: _layer.hidden\n          }))\n        );\n\n      return layer;\n    }\n\n    // TODO: If uuid provided\n    const uuid = uuidv4();\n    const layer = {\n      pixelCanvas: new PixelCanvas(this.canvasType, this.dimension, uuid),\n      uuid,\n      hidden: false\n    };\n    this.layerStack.push(layer);\n    return layer;\n  }\n\n  hideLayer(arg: { uuid: string }): void {\n    const layer = this.layerStack.find((_layer) => _layer.uuid === arg.uuid);\n\n    if (layer) {\n      layer.hidden = true;\n      layer.pixelCanvas.canvas.style.setProperty('opacity', '0');\n    }\n\n    if (this.layerStackUpdateCB)\n      this.layerStackUpdateCB(\n        this.layerStack.map((_layer) => ({\n          uuid: _layer.uuid,\n          imagePreview: _layer.imagePreview,\n          hidden: _layer.hidden\n        }))\n      );\n  }\n\n  showLayer(arg: { uuid: string }): void {\n    const layer = this.layerStack.find((_layer) => _layer.uuid === arg.uuid);\n\n    if (layer) {\n      layer.hidden = false;\n      layer.pixelCanvas.canvas.style.setProperty('opacity', '1');\n    }\n\n    if (this.layerStackUpdateCB)\n      this.layerStackUpdateCB(\n        this.layerStack.map((_layer) => ({\n          uuid: _layer.uuid,\n          imagePreview: _layer.imagePreview,\n          hidden: _layer.hidden\n        }))\n      );\n  }\n\n  addLayerBefore(arg: { uuid: string }): Layer {\n    console.log(arg);\n    const uuid = uuidv4();\n    const layer = {\n      pixelCanvas: new PixelCanvas(this.canvasType, this.dimension, uuid),\n      uuid,\n      hidden: false\n    };\n\n    for (let idx = 0, { length } = this.layerStack; idx < length; idx += 1) {\n      if (this.layerStack[idx].uuid === arg.uuid) {\n        this.canvasLayerWrapperElement.insertBefore(\n          layer.pixelCanvas.canvas,\n          this.layerStack[idx].pixelCanvas.canvas\n        );\n        this.layerStack.splice(idx, 0, layer);\n        break;\n      }\n    }\n\n    if (this.layerStackUpdateCB)\n      this.layerStackUpdateCB(\n        this.layerStack.map((_layer) => ({\n          uuid: _layer.uuid,\n          imagePreview: _layer.imagePreview,\n          hidden: _layer.hidden\n        }))\n      );\n\n    return layer;\n  }\n\n  deleteLayer(arg: { uuid: string }): void {\n    const [selectedLayer, ...rest] = this.layerStack.filter((layer) => layer.uuid === arg.uuid);\n    if (rest.length > 0) {\n      throw Error('uuid matches more than one layer');\n    }\n    if (!selectedLayer) {\n      throw Error('uuid does not match any layer');\n    }\n    this.canvasLayerWrapperElement.removeChild(selectedLayer.pixelCanvas.canvas);\n    this.layerStack = this.layerStack.filter((layer) => layer.uuid !== selectedLayer.uuid);\n\n    if (this.layerStackUpdateCB)\n      this.layerStackUpdateCB(\n        this.layerStack.map((_layer) => ({\n          uuid: _layer.uuid,\n          imagePreview: _layer.imagePreview,\n          hidden: _layer.hidden\n        }))\n      );\n\n    this.setActiveLayer(null);\n  }\n\n  insertLayerBefore(arg: { destinationUuid: string; uuid: string }): void {\n    const destinationLayer = this.layerStack.find((_layer) => _layer.uuid === arg.destinationUuid);\n    const layer = this.layerStack.find((_layer) => _layer.uuid === arg.uuid);\n\n    if (layer && destinationLayer) {\n      const filteredLayerStack = this.layerStack.filter((_layer) => _layer.uuid !== arg.uuid);\n\n      for (let idx = 0, { length } = filteredLayerStack; idx < length; idx += 1) {\n        if (filteredLayerStack[idx].uuid === arg.destinationUuid) {\n          filteredLayerStack.splice(idx, 0, layer);\n\n          this.layerStack = filteredLayerStack;\n\n          this.canvasLayerWrapperElement.insertBefore(\n            layer.pixelCanvas.canvas,\n            destinationLayer.pixelCanvas.canvas\n          );\n          break;\n        }\n      }\n\n      if (this.layerStackUpdateCB)\n        this.layerStackUpdateCB(\n          this.layerStack.map((_layer) => ({\n            uuid: _layer.uuid,\n            imagePreview: _layer.imagePreview,\n            hidden: _layer.hidden\n          }))\n        );\n    }\n  }\n\n  insertLayerAfter(arg: { destinationUuid: string; uuid: string }): void {\n    const destinationLayer = this.layerStack.find((_layer) => _layer.uuid === arg.destinationUuid);\n    const layer = this.layerStack.find((_layer) => _layer.uuid === arg.uuid);\n\n    if (layer && destinationLayer) {\n      const filteredLayerStack = this.layerStack.filter((_layer) => _layer.uuid !== arg.uuid);\n\n      for (let idx = 0, { length } = filteredLayerStack; idx < length; idx += 1) {\n        if (filteredLayerStack[idx].uuid === arg.destinationUuid) {\n          if (idx === filteredLayerStack.length - 1) {\n            filteredLayerStack.push(layer);\n          } else {\n            filteredLayerStack.splice(idx + 1, 0, layer);\n          }\n\n          this.layerStack = filteredLayerStack;\n\n          this.canvasLayerWrapperElement.insertBefore(\n            layer.pixelCanvas.canvas,\n            destinationLayer.pixelCanvas.canvas.nextSibling\n          );\n          break;\n        }\n      }\n\n      if (this.layerStackUpdateCB)\n        this.layerStackUpdateCB(\n          this.layerStack.map((_layer) => ({\n            uuid: _layer.uuid,\n            imagePreview: _layer.imagePreview,\n            hidden: _layer.hidden\n          }))\n        );\n    }\n  }\n\n  execute(command: LayerCommands): HistoryLayerCommands {\n    switch (command.type) {\n      case LayerCommandType.ADD_AFTER: {\n        const { uuid: generatedUuid } = this.addLayerAfter({\n          uuid: command.uuid\n        });\n        return { ...command, generatedUuid };\n      }\n      case LayerCommandType.ADD_BEFORE: {\n        console.log(command);\n        const { uuid: generatedUuid } = this.addLayerBefore({\n          uuid: command.uuid\n        });\n        return { ...command, generatedUuid };\n      }\n      case LayerCommandType.DELETE: {\n        this.deleteLayer({ uuid: command.uuid });\n        return command;\n      }\n      case LayerCommandType.HIDE: {\n        this.hideLayer({ uuid: command.uuid });\n        return command;\n      }\n      case LayerCommandType.SHOW: {\n        this.showLayer({ uuid: command.uuid });\n        return command;\n      }\n      case LayerCommandType.INSERT_AFTER: {\n        this.insertLayerAfter({\n          uuid: command.uuid,\n          destinationUuid: command.destinationUuid\n        });\n        return command;\n      }\n      case LayerCommandType.INSERT_BEFORE: {\n        this.insertLayerBefore({\n          uuid: command.uuid,\n          destinationUuid: command.destinationUuid\n        });\n        return command;\n      }\n      default:\n        throw new Error('Layer command not supported');\n    }\n  }\n\n  async updateLayerPreview(uuid: string): Promise<void> {\n    const layer = this.layerStack.find((_layer) => _layer.uuid === uuid);\n\n    if (layer) {\n      const blob = await layer.pixelCanvas.getCanvasBlob();\n      layer.imagePreview = URL.createObjectURL(blob);\n    }\n\n    if (this.layerStackUpdateCB)\n      this.layerStackUpdateCB(\n        this.layerStack.map((_layer) => ({\n          uuid: _layer.uuid,\n          imagePreview: _layer.imagePreview,\n          hidden: _layer.hidden\n        }))\n      );\n  }\n\n  async exportImage(name = 'my-project', format = 'img/png'): Promise<void> {\n    const exportCanvas = document.createElement('canvas');\n    exportCanvas.height = this.dimension;\n    exportCanvas.width = this.dimension;\n\n    const ctx = exportCanvas.getContext('2d');\n    this.layerStack.forEach((layer) => {\n      ctx?.drawImage(layer.pixelCanvas.canvas, 0, 0, this.dimension, this.dimension);\n    });\n\n    const generateBlob = new Promise((resolve) => {\n      exportCanvas.toBlob((blob) => {\n        resolve(blob);\n      }, format);\n    });\n\n    const blob = await generateBlob;\n\n    const imageUrl = URL.createObjectURL(blob);\n\n    const a = document.createElement('a');\n    a.setAttribute('download', name);\n    a.setAttribute('href', imageUrl);\n    a.click();\n  }\n}\n\nexport default LayerManager;\n","import { CanvasType } from '../types/types';\r\n\r\nclass GuideCanvas {\r\n  canvas: HTMLCanvasElement;\r\n\r\n  dimension: number;\r\n\r\n  ctx: CanvasRenderingContext2D;\r\n\r\n  tileDimension: number;\r\n\r\n  canvasType: CanvasType;\r\n\r\n  constructor(canvasType: CanvasType, dimension: number, mountTarget: HTMLDivElement) {\r\n    this.dimension = dimension;\r\n    this.canvasType = canvasType;\r\n    this.tileDimension = dimension / canvasType;\r\n    this.canvas = document.createElement('canvas');\r\n    this.canvas.classList.add('canvas-guide');\r\n    this.canvas.height = dimension;\r\n    this.canvas.width = dimension;\r\n    mountTarget.appendChild(this.canvas);\r\n\r\n    const ctx = this.canvas.getContext('2d');\r\n    if (ctx) {\r\n      this.ctx = ctx;\r\n    } else {\r\n      throw Error('Context is null');\r\n    }\r\n\r\n    this.drawGuideLines();\r\n  }\r\n\r\n  drawGuideLines(): void {\r\n    this.ctx.strokeStyle = '#E9F1F1';\r\n    this.ctx.lineWidth = 1;\r\n    for (let i = this.tileDimension; i < this.canvas.width; i += this.tileDimension) {\r\n      this.ctx.moveTo(0, i);\r\n      this.ctx.lineTo(this.canvas.width, i);\r\n      this.ctx.stroke();\r\n    }\r\n    for (let i = this.tileDimension; i < this.canvas.width; i += this.tileDimension) {\r\n      this.ctx.moveTo(i, 0);\r\n      this.ctx.lineTo(i, this.canvas.width);\r\n      this.ctx.stroke();\r\n    }\r\n  }\r\n}\r\n\r\nexport default GuideCanvas;\r\n","import { CanvasCommands, CanvasType, InstrumentType } from '../types/types';\n\nclass PreviewCanvas {\n  canvas: HTMLCanvasElement;\n\n  dimension: number;\n\n  ctx: CanvasRenderingContext2D;\n\n  tileDimension: number;\n\n  canvasType: CanvasType;\n\n  lastCommand: CanvasCommands | null = null;\n\n  constructor(canvasType: CanvasType, dimension: number, mountTarget: HTMLDivElement) {\n    this.dimension = dimension;\n    this.canvasType = canvasType;\n    this.tileDimension = dimension / canvasType;\n    this.canvas = document.createElement('canvas');\n    this.canvas.classList.add('preview-canvas');\n    this.canvas.height = dimension;\n    this.canvas.width = dimension;\n    mountTarget.appendChild(this.canvas);\n\n    const ctx = this.canvas.getContext('2d');\n    if (ctx) {\n      this.ctx = ctx;\n    } else {\n      throw Error('Context is null');\n    }\n  }\n\n  preview(command: CanvasCommands): void {\n    this.refresh();\n    this.lastCommand = command;\n\n    switch (command.instrument) {\n      case InstrumentType.PEN:\n        this.ctx.fillStyle = command.color.replace(/[\\d.]+\\)$/g, '0.4)');\n        this.ctx.fillRect(\n          Math.round(command.x * this.tileDimension),\n          Math.round(command.y * this.tileDimension),\n          this.tileDimension,\n          this.tileDimension\n        );\n        break;\n      case InstrumentType.PIXEL_SQUARE:\n        this.ctx.fillStyle = command.color.replace(/[\\d.]+\\)$/g, '0.4)');\n        this.ctx.fillRect(\n          Math.round(command.x * this.tileDimension - 16),\n          Math.round(command.y * this.tileDimension - 16),\n          this.tileDimension * 5,\n          this.tileDimension * 5\n        );\n        break;\n      case InstrumentType.ERASER:\n        this.ctx.fillStyle = '#ffffff';\n        this.ctx.fillRect(\n          Math.round(command.x * this.tileDimension),\n          Math.round(command.y * this.tileDimension),\n          this.tileDimension,\n          this.tileDimension\n        );\n        break;\n      default:\n        break;\n    }\n  }\n\n  refresh(): void {\n    switch (this.lastCommand?.instrument) {\n      case InstrumentType.PEN:\n        this.ctx.clearRect(\n          Math.round(this.lastCommand.x * this.tileDimension),\n          Math.round(this.lastCommand.y * this.tileDimension),\n          this.tileDimension,\n          this.tileDimension\n        );\n        break;\n      case InstrumentType.PIXEL_SQUARE:\n        this.ctx.clearRect(\n          Math.round(this.lastCommand.x * this.tileDimension - 16),\n          Math.round(this.lastCommand.y * this.tileDimension - 16),\n          this.tileDimension * 5,\n          this.tileDimension * 5\n        );\n        break;\n      case InstrumentType.ERASER:\n        this.ctx.clearRect(\n          Math.round(this.lastCommand.x * this.tileDimension),\n          Math.round(this.lastCommand.y * this.tileDimension),\n          this.tileDimension,\n          this.tileDimension\n        );\n        break;\n      default:\n        break;\n    }\n  }\n}\n\nexport default PreviewCanvas;\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { Subscription } from 'rxjs';\nimport { repeat } from 'rxjs/operators';\nimport CommandGenerator from './command-generator';\nimport EventManager from './event-manager';\nimport ExecutionPipeline from './execution-pipeline';\nimport LayerManager from './layer-manager';\nimport { CanvasType } from '../types/types';\nimport GuideCanvas from '../canvas/guide-canvas';\nimport PreviewCanvas from '../canvas/preview-canvas';\nimport '../styles/pixel-dust.css';\n\ntype PixelDustEngineProps = {\n  mountTarget: HTMLDivElement;\n  dimension: number;\n  initializeWithLayer?: true;\n  canvasType: CanvasType;\n};\n\nclass PixelDustEngine {\n  guideCanvas: GuideCanvas | undefined;\n\n  previewCanvas: PreviewCanvas | undefined;\n\n  mountTarget: HTMLDivElement;\n\n  stage: HTMLDivElement;\n\n  pixelDustCanvasContainer: HTMLDivElement;\n\n  eventManager: EventManager;\n\n  layerManager: LayerManager;\n\n  commandGenerator: CommandGenerator;\n\n  executionPipeline: ExecutionPipeline;\n\n  subscriptions: Subscription[] = [];\n\n  containerPosition = {\n    x: 0,\n    y: 0,\n    top: 0,\n    left: 0,\n    height: 0,\n    width: 0\n  };\n\n  computationCache = {\n    containerX: 0,\n    containerY: 0\n  };\n\n  constructor({ mountTarget, dimension, canvasType }: PixelDustEngineProps) {\n    this.mountTarget = mountTarget;\n\n    // Create stage (area with gray background)\n    this.stage = document.createElement('div');\n    this.stage.classList.add('pixel-dust-stage');\n\n    // Create canvas container (the white area also responsible for dealing with interaction events)\n    this.pixelDustCanvasContainer = document.createElement('div');\n    this.pixelDustCanvasContainer.classList.add('pixel-dust-canvas-container');\n    this.pixelDustCanvasContainer.style.setProperty('height', `${dimension}px`);\n    this.pixelDustCanvasContainer.style.setProperty('width', `${dimension}px`);\n\n    // Add canvas container to stage\n    this.stage.appendChild(this.pixelDustCanvasContainer);\n\n    // Add stage to mount point\n    this.mountTarget.appendChild(this.stage);\n\n    // Initialize event manager for getting interaction streams\n    this.eventManager = new EventManager({\n      canvasContainerElement: this.pixelDustCanvasContainer,\n      stage: this.stage\n    });\n\n    // Initialize layer manager for handling canvas layers and active layer\n    this.layerManager = new LayerManager({\n      canvasType,\n      dimension,\n      canvasContainerElement: this.pixelDustCanvasContainer\n    });\n\n    // Initialize command generator\n    this.commandGenerator = new CommandGenerator({\n      dimension,\n      canvasType,\n      drawStream: this.eventManager.canvasDraw$,\n      previewStream: this.eventManager.canvasPreview$\n    });\n\n    this.guideCanvas = new GuideCanvas(canvasType, dimension, this.pixelDustCanvasContainer);\n    this.previewCanvas = new PreviewCanvas(canvasType, dimension, this.pixelDustCanvasContainer);\n\n    // Initialize execution pipeline\n    this.executionPipeline = new ExecutionPipeline({\n      layerManager: this.layerManager,\n      commandGenerator: this.commandGenerator,\n      previewCanvas: this.previewCanvas\n    });\n\n    // use event manager move stream to deal with canvas move\n    this.subscriptions.push(\n      this.eventManager.canvasMove$.pipe(repeat()).subscribe({\n        next: (arg) => {\n          const { x, y } = arg;\n          this.pixelDustCanvasContainer?.style.setProperty('--stage-pos-x', String(x));\n          this.pixelDustCanvasContainer?.style.setProperty('--stage-pos-y', String(y));\n        },\n        complete: () => {},\n        error: (error) => console.error(error)\n      })\n    );\n\n    // use event manager scroll stream to deal with canvas scale\n    this.subscriptions.push(\n      this.eventManager.canvasScale$.subscribe({\n        next: (arg) => {\n          this.pixelDustCanvasContainer?.style.setProperty('--stage-scale', String(arg.scale));\n        },\n        complete: () => {},\n        error: (error) => console.error(error)\n      })\n    );\n\n    // use event manager undo stream to deal with undo commands\n    this.subscriptions.push(\n      this.eventManager.undoStream$.subscribe({\n        next: () => {\n          this.executionPipeline.undo();\n        },\n        complete: () => {},\n        error: (error) => console.error(error)\n      })\n    );\n  }\n\n  cleanUp(): void {\n    this.layerManager?.cleanUp();\n    this.commandGenerator?.cleanUp();\n    this.executionPipeline?.cleanUp();\n    this.eventManager?.cleanUp();\n\n    this.subscriptions.forEach((subscription) => {\n      subscription.unsubscribe();\n    });\n    this.mountTarget.innerHTML = '';\n  }\n}\n\nexport default PixelDustEngine;\n","import PixelDustEngine from './pixel-dust-engine';\nimport { LayerMetaData, LayerCommandType, CanvasType, InstrumentType } from '../types/types';\n\ntype PixelDustApiProps = {\n  mountTarget: HTMLDivElement;\n  dimension?: number;\n  canvasType?: CanvasType;\n  initializeWithLayer?: boolean;\n  layerStackUpdateCB?: (layerStack: LayerMetaData[]) => void;\n  activeLayerUpdateCB?: (layerStack: LayerMetaData | null) => void;\n};\n\nclass PixelDustApi {\n  pixelDustEngine: PixelDustEngine;\n\n  constructor({\n    mountTarget,\n    dimension = 800,\n    layerStackUpdateCB,\n    activeLayerUpdateCB,\n    canvasType = CanvasType.X100,\n    initializeWithLayer = true\n  }: PixelDustApiProps) {\n    this.pixelDustEngine = new PixelDustEngine({ mountTarget, dimension, canvasType });\n    if (this.pixelDustEngine.layerManager) {\n      this.pixelDustEngine.layerManager.layerStackUpdateCB = layerStackUpdateCB;\n      this.pixelDustEngine.layerManager.activeLayerUpdateCB = activeLayerUpdateCB;\n    } else {\n      throw Error('Could not set layer manager callbacks');\n    }\n    if (initializeWithLayer) {\n      this.addLayerAfter();\n      this.pixelDustEngine.layerManager.setActiveLayer({\n        uuid: this.pixelDustEngine.layerManager.layerStack[0].uuid\n      });\n    }\n  }\n\n  cleanUp(): void {\n    this.pixelDustEngine.cleanUp();\n  }\n\n  setForegroundColor(color: string): void {\n    if (this.pixelDustEngine.commandGenerator.drawingState.foregroundColor)\n      this.pixelDustEngine.commandGenerator.drawingState.foregroundColor = color;\n  }\n\n  setBackgroundColor(color: string): void {\n    if (this.pixelDustEngine.commandGenerator.drawingState.backgroundColor)\n      this.pixelDustEngine.commandGenerator.drawingState.backgroundColor = color;\n  }\n\n  setInstrumentType(instrument: InstrumentType): void {\n    if (this.pixelDustEngine.commandGenerator.drawingState.instrument)\n      this.pixelDustEngine.commandGenerator.drawingState.instrument = instrument;\n  }\n\n  addLayerAfter(arg?: { uuid?: string }): void {\n    this.pixelDustEngine.commandGenerator.layerCommand$.next({\n      type: LayerCommandType.ADD_AFTER,\n      ...arg\n    });\n  }\n\n  addLayerBefore(arg: { uuid: string }): void {\n    this.pixelDustEngine.commandGenerator.layerCommand$.next({\n      type: LayerCommandType.ADD_BEFORE,\n      ...arg\n    });\n  }\n\n  hideLayer(arg: { uuid: string }): void {\n    this.pixelDustEngine.commandGenerator.layerCommand$.next({\n      type: LayerCommandType.HIDE,\n      ...arg\n    });\n  }\n\n  showLayer(arg: { uuid: string }): void {\n    this.pixelDustEngine.commandGenerator.layerCommand$.next({\n      type: LayerCommandType.SHOW,\n      ...arg\n    });\n  }\n\n  setActiveLayer(arg: { uuid: string }): void {\n    this.pixelDustEngine.layerManager.setActiveLayer(arg);\n  }\n\n  deleteLayer(arg: { uuid: string }): void {\n    this.pixelDustEngine.commandGenerator.layerCommand$.next({\n      type: LayerCommandType.DELETE,\n      ...arg\n    });\n  }\n\n  insertLayerAfter(arg: { uuid: string; destinationUuid: string }): void {\n    this.pixelDustEngine.commandGenerator.layerCommand$.next({\n      type: LayerCommandType.INSERT_AFTER,\n      ...arg\n    });\n  }\n\n  insertLayerBefore(arg: { uuid: string; destinationUuid: string }): void {\n    this.pixelDustEngine.commandGenerator.layerCommand$.next({\n      type: LayerCommandType.INSERT_BEFORE,\n      ...arg\n    });\n  }\n\n  export(): Promise<void> {\n    return this.pixelDustEngine.layerManager.exportImage();\n  }\n}\n\nexport { CanvasType, InstrumentType };\nexport type { LayerMetaData };\nexport default PixelDustApi;\n"],"names":["uuidv4"],"mappings":"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"}